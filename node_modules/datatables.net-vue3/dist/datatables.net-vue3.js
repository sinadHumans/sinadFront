"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),g=["childRow","column-sizing","column-visibility","destroy","draw","error","init","length","order","page","preDraw","preInit","preXhr","processing","requestChild","search","stateLoadParams","stateLoaded","stateSaveParams","xhr","autoFill","preAutoFill","buttons-action","buttons-processing","column-reorder","key","key-blur","key-focus","key-refocus","key-return-submit","responsive-display","responsive-resize","rowgroup-datasrc","pre-row-reorder","row-reorder","row-reordered","dtsb-inserted","deselect","select","select-blur","selectItems","selectStyle","user-select","stateRestore-change"];let m;const D={name:"Datatables.netVue",inheritAttrs:!1,use(c){m=c}},h=l.defineComponent({...D,props:{ajax:null,columns:null,data:null,options:null},emits:g,setup(c,{expose:f}){const u=c,v=l.ref(null),i={},o=l.ref(),w=l.ref([]);l.watch(()=>u.data,t=>{let e=o.value;if(e){for(var n=Object.keys(i),s=0;s<n.length;s++)delete i[n[s]];e.clear(),e.rows.add(t).draw(!1)}},{deep:!0}),l.onMounted(()=>{var n,s;const t=l.getCurrentInstance();let e=u.options||{};if(u.data&&(e.data=u.data,k(e.data)),u.columns&&(e.columns=u.columns,b(e.columns,t)),u.ajax&&(e.ajax=u.ajax),e.columnDefs||(e.columnDefs=[]),t){let r=Object.keys(t.slots);for(let a=0;a<r.length;a++){let d=r[a];if(d.match(/^column\-/)){let p=d.replace("column-","");e.columnDefs.push({target:p.match(/^\d+$/)?parseInt(p):p+":name",render:"#"+d})}}b(e.columnDefs,t)}if(!m)throw new Error("DataTables library not set. See https://datatables.net/tn/19 for details.");o.value=new m(l.unref(v),e),(n=o.value)!=null&&n.page.info().serverSide&&((s=o.value)==null||s.on("preDraw",function(){let r=Object.keys(i);for(var a=0;a<r.length;a++)delete i[r[a]]}));for(let r of g)o.value&&t&&o.value.on(r,function(){var a=Array.from(arguments),d=a.shift();a.unshift({event:d,dt:o}),a.unshift(r),t.emit.apply(t,a)})}),l.onBeforeUnmount(()=>{var t;(t=o.value)==null||t.destroy(!0)});function k(t){w.value=t.value?t.value.slice():t.slice()}function y(t){return function(e,n,s,r){let a=r.row+","+r.col;if(!i[a]){let d=l.h("div",t({cellData:e,colIndex:r.col,rowData:s,rowIndex:r.row,type:n}));i[a]=document.createElement("div"),l.render(d,i[a])}return i[a]}}function b(t,e){if(e)for(let s=0;s<t.length;s++){let r=t[s];if(typeof r.render=="string"&&r.render.charAt(0)==="#"){var n=r.render.replace("#","");e.slots[n]&&(r.render=y(e.slots[n]))}else if(typeof r.render=="object"&&typeof r.render.display=="string"&&r.render.display.charAt(0)==="#"){var n=r.render.display.replace("#","");e.slots[n]&&(r.render.display=y(e.slots[n]))}}}return f({dt:o}),(t,e)=>e[0]||(l.setBlockTracking(-1),e[0]=l.createElementVNode("div",{class:"datatable"},[l.createElementVNode("table",l.mergeProps({ref_key:"table",ref:v},t.$attrs,{style:{width:"100%"}}),[l.renderSlot(t.$slots,"default")],16)]),l.setBlockTracking(1),e[0])}}),j=(()=>{const c=h;return c.install=f=>{f.component("Datatables.netVue",c)},c})();exports.DataTable=h;exports.default=j;
