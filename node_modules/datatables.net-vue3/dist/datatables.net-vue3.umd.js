(function(o,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(o=typeof globalThis<"u"?globalThis:o||self,n((o.datatables=o.datatables||{},o.datatables["net-vue3"]={}),o.Vue))})(this,function(o,n){"use strict";const b=["childRow","column-sizing","column-visibility","destroy","draw","error","init","length","order","page","preDraw","preInit","preXhr","processing","requestChild","search","stateLoadParams","stateLoaded","stateSaveParams","xhr","autoFill","preAutoFill","buttons-action","buttons-processing","column-reorder","key","key-blur","key-focus","key-refocus","key-return-submit","responsive-display","responsive-resize","rowgroup-datasrc","pre-row-reorder","row-reorder","row-reordered","dtsb-inserted","deselect","select","select-blur","selectItems","selectStyle","user-select","stateRestore-change"];let p;const k={name:"Datatables.netVue",inheritAttrs:!1,use(u){p=u}},h=n.defineComponent({...k,props:{ajax:null,columns:null,data:null,options:null},emits:b,setup(u,{expose:m}){const d=u,g=n.ref(null),c={},i=n.ref(),j=n.ref([]);n.watch(()=>d.data,t=>{let e=i.value;if(e){for(var s=Object.keys(c),l=0;l<s.length;l++)delete c[s[l]];e.clear(),e.rows.add(t).draw(!1)}},{deep:!0}),n.onMounted(()=>{var s,l;const t=n.getCurrentInstance();let e=d.options||{};if(d.data&&(e.data=d.data,x(e.data)),d.columns&&(e.columns=d.columns,v(e.columns,t)),d.ajax&&(e.ajax=d.ajax),e.columnDefs||(e.columnDefs=[]),t){let r=Object.keys(t.slots);for(let a=0;a<r.length;a++){let f=r[a];if(f.match(/^column\-/)){let y=f.replace("column-","");e.columnDefs.push({target:y.match(/^\d+$/)?parseInt(y):y+":name",render:"#"+f})}}v(e.columnDefs,t)}if(!p)throw new Error("DataTables library not set. See https://datatables.net/tn/19 for details.");i.value=new p(n.unref(g),e),(s=i.value)!=null&&s.page.info().serverSide&&((l=i.value)==null||l.on("preDraw",function(){let r=Object.keys(c);for(var a=0;a<r.length;a++)delete c[r[a]]}));for(let r of b)i.value&&t&&i.value.on(r,function(){var a=Array.from(arguments),f=a.shift();a.unshift({event:f,dt:i}),a.unshift(r),t.emit.apply(t,a)})}),n.onBeforeUnmount(()=>{var t;(t=i.value)==null||t.destroy(!0)});function x(t){j.value=t.value?t.value.slice():t.slice()}function w(t){return function(e,s,l,r){let a=r.row+","+r.col;if(!c[a]){let f=n.h("div",t({cellData:e,colIndex:r.col,rowData:l,rowIndex:r.row,type:s}));c[a]=document.createElement("div"),n.render(f,c[a])}return c[a]}}function v(t,e){if(e)for(let l=0;l<t.length;l++){let r=t[l];if(typeof r.render=="string"&&r.render.charAt(0)==="#"){var s=r.render.replace("#","");e.slots[s]&&(r.render=w(e.slots[s]))}else if(typeof r.render=="object"&&typeof r.render.display=="string"&&r.render.display.charAt(0)==="#"){var s=r.render.display.replace("#","");e.slots[s]&&(r.render.display=w(e.slots[s]))}}}return m({dt:i}),(t,e)=>e[0]||(n.setBlockTracking(-1),e[0]=n.createElementVNode("div",{class:"datatable"},[n.createElementVNode("table",n.mergeProps({ref_key:"table",ref:g},t.$attrs,{style:{width:"100%"}}),[n.renderSlot(t.$slots,"default")],16)]),n.setBlockTracking(1),e[0])}}),D=(()=>{const u=h;return u.install=m=>{m.component("Datatables.netVue",u)},u})();o.DataTable=h,o.default=D,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
